'use client'

import { createContext, useContext, useEffect, useMemo, useState } from 'react'

export type SupportedLang = 'en' | 'ro' | 'it' | 'de' | 'es'

type Dictionary = Record<string, string>

const dictionaries: Record<SupportedLang, Dictionary> = {
  en: {
    // Navigation & Header
    'nav.browse': 'Browse Items',
    'nav.dashboard': 'Dashboard',
    'nav.profile': 'Profile',
    'nav.signIn': 'Sign In',
    'nav.signOut': 'Sign Out',
    'nav.listItem': 'List Item',
    'nav.createListing': 'Create Listing',
    'nav.editProfile': 'Edit Profile',
    'nav.messages': 'Messages',
    'nav.reports': 'Reports',
    'nav.reviews': 'Reviews',
    'nav.payments': 'Payments',
    'header.welcome': 'Welcome',

    // Homepage
    'home.title': 'Private offers for luxury items',
    'home.subtitle': 'List your item. Buyers send private offers. Accept the best one. After commission payment, contact details are revealed to both sides.',
    'home.ctaBrowse': 'Browse Items',
    'home.ctaSell': 'Start Selling',
    'home.whyChoose': 'Why Choose LuxBID?',
    'home.getStarted': 'Get Started',
    'home.about': 'About',
    'home.contact': 'Contact',
    'home.help': 'Help',
    'home.terms': 'Terms',
    'home.privacy': 'Privacy',
    'home.newsletter': 'Newsletter',

    // Features
    'feature.privateOffers.title': 'Private Offers',
    'feature.privateOffers.desc': 'No public bids. Buyers send private offers directly to you.',
    'feature.auth.title': 'Authenticity Guaranteed',
    'feature.auth.desc': 'Every item is verified by our experts.',
    'feature.fees.title': 'Transparent Fees',
    'feature.fees.desc': 'Clear commission with no hidden costs.',
    'feature.secure.title': 'Secure & Private',
    'feature.secure.desc': 'Your identity is protected until the deal is finalized.',

    // Listings
    'listings.title': 'Luxury Items',
    'listings.subtitle': 'Discover exclusive items and send private offers',
    'listings.none': 'No listings found',
    'listings.firstToList': 'Be the first to list a luxury item!',
    'listings.create': 'Create Listing',
    'listings.viewDetails': 'View Details',
    'listings.offers': 'offers',
    'listings.status.active': 'Active',
    'listings.status.sold': 'Sold',
    'listings.status.expired': 'Expired',
    'listings.status.cancelled': 'Cancelled',
    'listings.condition.new': 'New',
    'listings.condition.excellent': 'Excellent',
    'listings.condition.good': 'Good',
    'listings.condition.fair': 'Fair',
    'listings.category.watch': 'Watch',
    'listings.category.bag': 'Handbag',
    'listings.category.jewelry': 'Jewelry',

    // Listing Form
    'listings.form.title': 'Title',
    'listings.form.description': 'Description',
    'listings.form.category': 'Category',
    'listings.form.brand': 'Brand',
    'listings.form.model': 'Model',
    'listings.form.year': 'Year',
    'listings.form.condition': 'Condition',
    'listings.form.askingPrice': 'Asking Price',
    'listings.form.images': 'Images',
    'listings.form.required': 'Required field',
    'listings.form.optional': 'Optional',
    'listings.form.submit': 'Create Listing',
    'listings.form.submitting': 'Creating...',
    'listings.form.success': 'Listing created successfully!',
    'listings.form.error': 'Failed to create listing',

    // Listing Details
    'details.listedByOn': 'Listed by',
    'details.category': 'Category',
    'details.condition': 'Condition',
    'details.brand': 'Brand',
    'details.model': 'Model',
    'details.year': 'Year',
    'details.description': 'Description',
    'details.price': 'Price',
    'details.seller': 'Seller',
    'details.created': 'Created',
    'details.updated': 'Updated',
    'details.status': 'Status',

    // Offers
    'offer.make': 'Make an Offer',
    'offer.submit': 'Submit Offer',
    'offer.amount': 'Offer Amount *',
    'offer.message': 'Message (Optional)',
    'offer.received': 'Offers Received',
    'offer.accept': 'Accept Offer',
    'offer.accepted': 'Accepted',
    'offer.pending': 'Pending',
    'offer.rejected': 'Rejected',
    'offer.expired': 'Expired',
    'offer.status': 'Status',
    'offer.date': 'Date',
    'offer.from': 'From',
    'offer.to': 'To',
    'offer.success': 'Offer submitted successfully!',
    'offer.error': 'Failed to submit offer',

    // Dashboard
    'dashboard.title': 'Dashboard',
    'dashboard.welcomeBack': 'Welcome back',
    'dashboard.activeOffers': 'Active Offers',
    'dashboard.acceptedDeals': 'Accepted Deals',
    'dashboard.totalValue': 'Total Value Offered',
    'dashboard.saved': 'Saved Items',
    'dashboard.recentOffers': 'Recent Offers',
    'dashboard.accepted': 'Accepted Deals',
    'dashboard.stats': 'Statistics',
    'dashboard.transactions': 'Transactions',
    'dashboard.messages': 'Messages',
    'dashboard.notifications': 'Notifications',
    'dashboard.quickActions': 'Quick Actions',
    'dashboard.viewAll': 'View All',

    // Messages
    'messages.title': 'Messages',
    'messages.subtitle': 'Your conversations',
    'messages.none': 'No messages yet',
    'messages.start': 'Start a conversation',
    'messages.loading': 'Loading messages...',
    'messages.type': 'Type your message...',
    'messages.send': 'Send',
    'messages.sent': 'Sent',
    'messages.error': 'Failed to send message',
    'messages.unread': 'Unread',
    'messages.read': 'Read',
    'messages.markRead': 'Mark as read',
    'messages.markUnread': 'Mark as unread',
    'messages.delete': 'Delete',
    'messages.deleted': 'Message deleted',
    'messages.conversation': 'Conversation',
    'messages.conversations': 'Conversations',
    'messages.select': 'Select a conversation',
    'messages.new': 'New Message',
    'messages.reply': 'Reply',
    'messages.forward': 'Forward',
    'messages.archive': 'Archive',
    'messages.unarchive': 'Unarchive',
    'messages.archived': 'Archived',

    // Authentication
    'auth.login.title': 'Welcome back',
    'auth.login.subtitle': 'Sign in to your account',
    'auth.login.email': 'Email',
    'auth.login.password': 'Password',
    'auth.login.submit': 'Sign in',
    'auth.login.submitting': 'Signing in...',
    'auth.login.error': 'Invalid email or password',
    'auth.login.success': 'Signed in successfully!',
    'auth.login.forgot': 'Forgot password?',
    'auth.login.noAccount': 'Don\'t have an account?',
    'auth.register.title': 'Create account',
    'auth.register.subtitle': 'Join LuxBID',
    'auth.register.name': 'Full Name',
    'auth.register.email': 'Email',
    'auth.register.password': 'Password',
    'auth.register.confirmPassword': 'Confirm Password',
    'auth.register.role': 'I want to',
    'auth.register.roleBuyer': 'Buy luxury items',
    'auth.register.roleSeller': 'Sell luxury items',
    'auth.register.submit': 'Create account',
    'auth.register.submitting': 'Creating account...',
    'auth.register.error': 'Failed to create account',
    'auth.register.success': 'Account created successfully!',
    'auth.register.hasAccount': 'Already have an account?',
    
    // Register account types
    'register.accountType': 'Account Type',
    'register.individual': 'Individual (Personal)',
    'register.company': 'Company (Business)',

    // Payments
    'payment.success.title': 'Payment Successful!',
    'payment.success.subtitle': 'Thank you for your purchase',
    'payment.success.amount': 'Amount paid',
    'payment.success.commission': 'Commission',
    'payment.success.total': 'Total',
    'payment.success.transactionId': 'Transaction ID',
    'payment.success.date': 'Payment date',
    'payment.success.status': 'Payment status',
    'payment.success.next': 'What\'s next?',
    'payment.success.step1': 'Email confirmation',
    'payment.success.step2': 'Seller notified',
    'payment.success.step3': 'Contacts shared after commission',
    'payment.success.step4': 'Arrange shipping with seller',
    'payment.success.dashboard': 'Go to Dashboard',
    'payment.success.browse': 'Browse More Items',

    // Reports
    'reports.title': 'Reports & Analytics',
    'reports.subtitle': 'Platform performance and insights',
    'reports.dateRange': 'Date Range',
    'reports.last7days': 'Last 7 days',
    'reports.last30days': 'Last 30 days',
    'reports.last90days': 'Last 90 days',
    'reports.lastYear': 'Last year',
    'reports.export': 'Export CSV',
    'reports.metrics.revenue': 'Total Revenue',
    'reports.metrics.listings': 'Total Listings',
    'reports.metrics.offers': 'Total Offers',
    'reports.metrics.users': 'Active Users',
    'reports.trend.title': 'Monthly Revenue Trend',
    'reports.trend.subtitle': 'Revenue over time',
    'reports.categories.title': 'Top Categories',
    'reports.categories.subtitle': 'Most popular categories',
    'reports.transactions.title': 'Recent Transactions',
    'reports.transactions.subtitle': 'Latest platform activity',

    // Reviews
    'reviews.title': 'Reviews & Ratings',
    'reviews.subtitle': 'Customer feedback',
    'reviews.filter.all': 'All Reviews',
    'reviews.filter.positive': 'Positive (4-5 stars)',
    'reviews.filter.negative': 'Negative (1-2 stars)',
    'reviews.stats.average': 'Average Rating',
    'reviews.stats.total': 'Total Reviews',
    'reviews.stats.positive': 'Positive Reviews',
    'reviews.stats.negative': 'Negative Reviews',
    'reviews.none': 'No reviews found',
    'reviews.noneFiltered': 'No reviews match the filter',
    'reviews.write': 'Write a Review',
    'reviews.edit': 'Edit Review',
    'reviews.delete': 'Delete Review',
    'reviews.report': 'Report Review',
    'reviews.helpful': 'Helpful',
    'reviews.notHelpful': 'Not Helpful',

    // Common
    'common.loading': 'Loading...',
    'common.error': 'An error occurred',
    'common.success': 'Success!',
    'common.edit': 'Edit',
    'common.save': 'Save',
    'common.cancel': 'Cancel',

    // Profile
    'profile.title': 'My Profile',
    'profile.subtitle': 'Manage your account settings and preferences',
    'profile.personalInfo': 'Personal Information',
    'profile.memberSince': 'Member since',
    'common.delete': 'Delete',
    'common.view': 'View',
    'common.close': 'Close',
    'common.back': 'Back',
    'common.next': 'Next',
    'common.submit': 'Submit',
    'common.continue': 'Continue',
    'common.confirm': 'Confirm',
    'common.yes': 'Yes',
    'common.no': 'No',
    'common.or': 'or',
    'common.and': 'and',
    'common.all': 'All',
    'common.none': 'None',
    'common.more': 'More',
    'common.less': 'Less',
    'common.search': 'Search',
    'common.filter': 'Filter',
    'common.sort': 'Sort',
    'common.select': 'Select',
    'common.required': 'Required',
    'common.optional': 'Optional',
    'common.status': 'Status',
    'common.date': 'Date',
    'common.time': 'Time',
    'common.price': 'Price',
    'common.amount': 'Amount',
    'common.total': 'Total',
    'common.details': 'Details',
    'common.description': 'Description',
    'common.category': 'Category',
    'common.type': 'Type',
    'common.name': 'Name',
    'common.email': 'Email',
    'common.phone': 'Phone',
    'common.address': 'Address',
    'common.city': 'City',
    'common.country': 'Country',
    'common.language': 'Language',
    'common.currency': 'Currency',
    'common.settings': 'Settings',
    'common.preferences': 'Preferences',
    'common.notifications': 'Notifications',
    'common.messages': 'Messages',
    'common.profile': 'Profile',
    'common.account': 'Account',
    'common.security': 'Security',
    'common.privacy': 'Privacy',
    'common.terms': 'Terms',
    'common.help': 'Help',
    'common.support': 'Support',
    'common.contact': 'Contact',
    'common.about': 'About',
    'common.legal': 'Legal',
    'common.copyright': 'Copyright',
    'common.rights': 'All rights reserved',

    // Error Messages
    'error.required': 'This field is required',
    'error.email': 'Invalid email address',
    'error.password': 'Password is too weak',
    'error.passwordMatch': 'Passwords do not match',
    'error.minLength': 'Must be at least {0} characters',
    'error.maxLength': 'Must be at most {0} characters',
    'error.number': 'Must be a number',
    'error.min': 'Must be at least {0}',
    'error.max': 'Must be at most {0}',
    'error.pattern': 'Invalid format',
    'error.server': 'Server error occurred',
    'error.network': 'Network error occurred',
    'error.unknown': 'An unknown error occurred',
    'error.unauthorized': 'Unauthorized access',
    'error.forbidden': 'Access forbidden',
    'error.notFound': 'Not found',
    'error.validation': 'Validation error',
    'error.duplicate': 'Already exists',
    'error.timeout': 'Request timed out',
    'error.offline': 'You are offline',
    'error.try_again': 'Please try again',
    'error.contact_support': 'Please contact support'
  },
  ro: {
    'nav.browse': 'Vezi Anunțuri',
    'nav.dashboard': 'Panou',
    'nav.messages': 'Mesaje',
    'nav.profile': 'Profil',
    'nav.signIn': 'Autentificare',
    'nav.signOut': 'Deconectare',
    'nav.listItem': 'Adaugă Anunț',
    'nav.createListing': 'Creează Anunț',
    'header.welcome': 'Bun venit',
    'home.title': 'Oferte private pentru obiecte de lux',
    'home.subtitle': 'Listezi obiectul. Cumpărătorii îți trimit oferte private. Accepți cea mai bună. După plata comisionului, datele de contact se dezvăluie ambelor părți.',
    'home.ctaBrowse': 'Vezi Anunțuri',
    'home.ctaSell': 'Începe să vinzi',
    'home.whyChoose': 'De ce LuxBID?',
    'feature.privateOffers.title': 'Oferte Private',
    'feature.privateOffers.desc': 'Fără licitații publice. Cumpărătorii trimit oferte direct către tine.',
    'feature.auth.title': 'Autenticitate Garanatată',
    'feature.auth.desc': 'Fiecare articol este verificat de experții noștri.',
    'feature.fees.title': 'Comisioane transparente',
    'feature.fees.desc': 'Structură clară, fără costuri ascunse.',
    'listings.title': 'Articole de lux',
    'listings.subtitle': 'Descoperă articole exclusive și trimite oferte private',
    'listings.none': 'Nu există anunțuri',
    'listings.firstToList': 'Fii primul care adaugă un articol!',
    'listings.create': 'Creează Anunț',
    'listings.viewDetails': 'Vezi Detalii',
    'listings.offers': 'oferte',
    'details.listedByOn': 'Listat de',
    'details.category': 'Categorie',
    'details.condition': 'Stare',
    'details.brand': 'Brand',
    'details.model': 'Model',
    'details.year': 'Anul',
    'details.description': 'Descriere',
    'details.price': 'Preț',
    'offer.make': 'Fă o Ofertă',
    'offer.submit': 'Trimite Oferta',
    'offer.amount': 'Sumă ofertă *',
    'offer.message': 'Mesaj (opțional)',
    'offer.received': 'Oferte primite',
    'offer.accept': 'Acceptă Oferta',
    'offer.accepted': 'Acceptată',
    'offer.pending': 'În așteptare',
    'dashboard.title': 'Panou',
    'dashboard.welcomeBack': 'Bine ai revenit',
    'dashboard.activeOffers': 'Oferte active',
    'dashboard.acceptedDeals': 'Acorduri acceptate',
    'dashboard.totalValue': 'Valoare totală ofertată',
    'dashboard.saved': 'Articole salvate',
    'dashboard.recentOffers': 'Oferte recente',
    'dashboard.accepted': 'Acorduri acceptate',
    
    // Register account types (Romanian)
    'register.accountType': 'Tipul contului',
    'register.individual': 'Persoană fizică',
    'register.company': 'Companie',
  },
  it: {
    'nav.browse': 'Sfoglia articoli',
    'nav.dashboard': 'Dashboard',
    'nav.profile': 'Profilo',
    'nav.signIn': 'Accedi',
    'nav.signOut': 'Esci',
    'nav.listItem': 'Pubblica annuncio',
    'header.welcome': 'Benvenuto',
    'home.title': 'Offerte private per articoli di lusso',
    'home.subtitle': 'Pubblica il tuo articolo. Gli acquirenti inviano offerte private. Accetta la migliore. Dopo il pagamento della commissione, i contatti vengono condivisi.',
    'home.ctaBrowse': 'Sfoglia articoli',
    'home.ctaSell': 'Inizia a vendere',
    'home.whyChoose': 'Perché LuxBID?',
    'feature.privateOffers.title': 'Offerte private',
    'feature.privateOffers.desc': 'Nessuna asta pubblica. Offerte private dirette.',
    'feature.auth.title': 'Autenticità garantita',
    'feature.auth.desc': 'Ogni articolo è verificato.',
    'feature.fees.title': 'Commissioni trasparenti',
    'feature.fees.desc': 'Struttura chiara senza costi nascosti.',
    'listings.title': 'Articoli di lusso',
    'listings.subtitle': 'Scopri articoli esclusivi e invia offerte private',
    'listings.none': 'Nessun annuncio',
    'listings.firstToList': 'Sii il primo a pubblicare!',
    'listings.create': 'Crea annuncio',
    'listings.viewDetails': 'Vedi dettagli',
    'listings.offers': 'offerte',
    'details.listedByOn': 'Pubblicato da',
    'details.category': 'Categoria',
    'details.condition': 'Condizione',
    'details.brand': 'Marca',
    'details.model': 'Modello',
    'details.year': 'Anno',
    'details.description': 'Descrizione',
    'details.price': 'Prezzo',
    'offer.make': 'Fai un’offerta',
    'offer.submit': 'Invia offerta',
    'offer.amount': 'Importo offerta *',
    'offer.message': 'Messaggio (opzionale)',
    'offer.received': 'Offerte ricevute',
    'offer.accept': 'Accetta offerta',
    'offer.accepted': 'Accettata',
    'offer.pending': 'In attesa',
    'dashboard.title': 'Dashboard',
    'dashboard.welcomeBack': 'Bentornato',
    'dashboard.activeOffers': 'Offerte attive',
    'dashboard.acceptedDeals': 'Accordi accettati',
    'dashboard.totalValue': 'Valore totale offerto',
    'dashboard.saved': 'Articoli salvati',
    'dashboard.recentOffers': 'Offerte recenti',
    'dashboard.accepted': 'Accordi accettati',
  },
  de: {
    'nav.browse': 'Artikel ansehen',
    'nav.dashboard': 'Dashboard',
    'nav.profile': 'Profil',
    'nav.signIn': 'Anmelden',
    'nav.signOut': 'Abmelden',
    'nav.listItem': 'Anzeige erstellen',
    'header.welcome': 'Willkommen',
    'home.title': 'Private Angebote für Luxusartikel',
    'home.subtitle': 'Artikel einstellen. Käufer senden private Angebote. Beste annehmen. Nach Provisionszahlung werden Kontaktdaten freigegeben.',
    'home.ctaBrowse': 'Artikel ansehen',
    'home.ctaSell': 'Verkaufen starten',
    'home.whyChoose': 'Warum LuxBID?',
    'feature.privateOffers.title': 'Private Angebote',
    'feature.privateOffers.desc': 'Keine öffentlichen Auktionen. Private Angebote direkt an Sie.',
    'feature.auth.title': 'Echtheit garantiert',
    'feature.auth.desc': 'Jeder Artikel wird geprüft.',
    'feature.fees.title': 'Transparente Gebühren',
    'feature.fees.desc': 'Klare Provision ohne versteckte Kosten.',
    'listings.title': 'Luxusartikel',
    'listings.subtitle': 'Exklusive Artikel entdecken und private Angebote senden',
    'listings.none': 'Keine Anzeigen gefunden',
    'listings.firstToList': 'Seien Sie der Erste!',
    'listings.create': 'Anzeige erstellen',
    'listings.viewDetails': 'Details ansehen',
    'listings.offers': 'Angebote',
    'details.listedByOn': 'Eingestellt von',
    'details.category': 'Kategorie',
    'details.condition': 'Zustand',
    'details.brand': 'Marke',
    'details.model': 'Modell',
    'details.year': 'Jahr',
    'details.description': 'Beschreibung',
    'details.price': 'Preis',
    'offer.make': 'Angebot machen',
    'offer.submit': 'Angebot senden',
    'offer.amount': 'Angebotsbetrag *',
    'offer.message': 'Nachricht (optional)',
    'offer.received': 'Erhaltene Angebote',
    'offer.accept': 'Angebot annehmen',
    'offer.accepted': 'Angenommen',
    'offer.pending': 'Ausstehend',
    'dashboard.title': 'Dashboard',
    'dashboard.welcomeBack': 'Willkommen zurück',
    'dashboard.activeOffers': 'Aktive Angebote',
    'dashboard.acceptedDeals': 'Angenommene Deals',
    'dashboard.totalValue': 'Gesamtwert der Angebote',
    'dashboard.saved': 'Gespeicherte Artikel',
    'dashboard.recentOffers': 'Neueste Angebote',
    'dashboard.accepted': 'Angenommene Deals',
  },
  es: {
    'nav.browse': 'Ver artículos',
    'nav.dashboard': 'Panel',
    'nav.profile': 'Perfil',
    'nav.signIn': 'Iniciar sesión',
    'nav.signOut': 'Cerrar sesión',
    'nav.listItem': 'Publicar anuncio',
    'header.welcome': 'Bienvenido',
    'home.title': 'Ofertas privadas para artículos de lujo',
    'home.subtitle': 'Publica tu artículo. Los compradores envían ofertas privadas. Acepta la mejor. Tras pagar la comisión, se comparten los datos de contacto.',
    'home.ctaBrowse': 'Ver artículos',
    'home.ctaSell': 'Empezar a vender',
    'home.whyChoose': '¿Por qué LuxBID?',
    'feature.privateOffers.title': 'Ofertas privadas',
    'feature.privateOffers.desc': 'Sin subastas públicas. Ofertas privadas directas.',
    'feature.auth.title': 'Autenticidad garantizada',
    'feature.auth.desc': 'Cada artículo es verificado.',
    'feature.fees.title': 'Tarifas transparentes',
    'feature.fees.desc': 'Comisión clara sin costes ocultos.',
    'listings.title': 'Artículos de lujo',
    'listings.subtitle': 'Descubre artículos exclusivos y envía ofertas privadas',
    'listings.none': 'No hay anuncios',
    'listings.firstToList': '¡Sé el primero en publicar!',
    'listings.create': 'Crear anuncio',
    'listings.viewDetails': 'Ver detalles',
    'listings.offers': 'ofertas',
    'details.listedByOn': 'Publicado por',
    'details.category': 'Categoría',
    'details.condition': 'Condición',
    'details.brand': 'Marca',
    'details.model': 'Modelo',
    'details.year': 'Año',
    'details.description': 'Descripción',
    'details.price': 'Precio',
    'offer.make': 'Hacer una oferta',
    'offer.submit': 'Enviar oferta',
    'offer.amount': 'Importe de la oferta *',
    'offer.message': 'Mensaje (opcional)',
    'offer.received': 'Ofertas recibidas',
    'offer.accept': 'Aceptar oferta',
    'offer.accepted': 'Aceptada',
    'offer.pending': 'Pendiente',
    'dashboard.title': 'Panel',
    'dashboard.welcomeBack': 'Bienvenido de nuevo',
    'dashboard.activeOffers': 'Ofertas activas',
    'dashboard.acceptedDeals': 'Acuerdos aceptados',
    'dashboard.totalValue': 'Valor total ofertado',
    'dashboard.saved': 'Artículos guardados',
    'dashboard.recentOffers': 'Ofertas recientes',
    'dashboard.accepted': 'Acuerdos aceptados',
  },
}

type I18nContextType = {
  lang: SupportedLang
  setLang: (lang: SupportedLang) => void
  t: (key: string) => string
}

const I18nContext = createContext<I18nContextType | null>(null)

export function I18nProvider({ children }: { children: React.ReactNode }) {
  const [lang, setLangState] = useState<SupportedLang>('ro')

  useEffect(() => {
    const cookieLang = typeof document !== 'undefined'
      ? (document.cookie.split('; ').find((c) => c.startsWith('lang='))?.split('=')[1] as SupportedLang | undefined)
      : undefined
    if (cookieLang && dictionaries[cookieLang]) {
      setLangState(cookieLang)
    }
  }, [])

  const setLang = (l: SupportedLang) => {
    setLangState(l)
    if (typeof document !== 'undefined') {
      document.cookie = `lang=${l}; path=/; max-age=${60 * 60 * 24 * 365}`
    }
  }

  const t = useMemo(() => {
    const dict = dictionaries[lang]
    return (key: string) => dict[key] ?? key
  }, [lang])

  const value: I18nContextType = { lang, setLang, t }
  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>
}

export function useI18n(): I18nContextType {
  const ctx = useContext(I18nContext)
  if (!ctx) throw new Error('useI18n must be used within I18nProvider')
  return ctx
}


